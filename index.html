<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeSwitch - Stop Fighting Your Keyboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Syne:wght@700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #FFFFFF;
            --bg-secondary: #F8F9FA;
            --text-dark: #212529;
            --text-light: #6C757D;
            --accent-blue: #007AFF;
            --accent-green: #34C759;
            --border-color: #E5E7EB;

            --font-headline: 'Syne', sans-serif;
            --font-body: 'Inter', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            background-color: var(--bg-main);
            color: var(--text-dark);
            font-family: var(--font-body);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow: hidden;
        }
        
        .scroll-container {
            width: 100%;
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
        }

        .scroll-section {
            height: 100vh;
            width: 100%;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column; 
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            position: relative;
        }
        
        .container {
            width: 90%;
            max-width: 1100px;
            margin: 0 auto;
            text-align: center;
            position: relative; /* Ensure content is on top of pseudo-elements */
            z-index: 2;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero {
            background-image: linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.85)), url('https://i.ibb.co/27SxF4yc/image.jpg');
            background-size: cover;
            background-position: center;
        }

        .hero h1, .hero h2, .hero .hero-sub-stat, .hero .hero-cta-wrapper {
            animation: fadeIn 0.6s ease-out forwards;
            opacity: 0;
        }
        .hero h1 { animation-delay: 0.1s; }
        .hero h2 { animation-delay: 0.2s; }
        .hero .hero-sub-stat { animation-delay: 0.3s; }
        .hero .hero-cta-wrapper { animation-delay: 0.4s; }

        .hero h1 {
            font-family: var(--font-headline);
            font-size: clamp(2.8rem, 6vw, 4.5rem);
            font-weight: 800;
            letter-spacing: -2px;
            line-height: 1.1;
            margin-bottom: 1rem;
        }

        .hero h2 {
            font-size: clamp(1.1rem, 3vw, 1.5rem);
            font-weight: 400;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto 0.5rem auto; 
        }
        
        .hero .hero-sub-stat {
             font-size: clamp(0.9rem, 2vw, 1.1rem);
             font-weight: 500;
             color: var(--accent-blue);
             margin-bottom: 2.5rem;
        }

        .hero-cta-wrapper {
            margin-top: 25px; 
        }

        .cta-button {
            display: inline-block;
            background-color: var(--accent-blue);
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 16px 40px;
            border-radius: 50px;
            text-decoration: none;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 122, 255, 0.3);
            border: none;
            cursor: pointer;
        }
        .cta-button:hover { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(0, 122, 255, 0.4); }
        
        .hero .microcopy { margin-top: 1rem; font-size: 0.9rem; color: var(--text-light); }

        .section-title { font-family: var(--font-headline); font-size: clamp(2.2rem, 5vw, 3.2rem); margin-bottom: 40px; font-weight: 700; }
        .problems { background-color: var(--bg-secondary); }
        
        .problems-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            text-align: left;
            align-items: start;
        }

        .problem-card {
            background: var(--bg-main);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            flex-direction: column;
            min-height: 120px;
        }
        .problem-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.07); }
        
        .problem-card__description {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, opacity 0.4s ease, margin-top 0.5s ease;
            font-size: 0.9rem;
            color: var(--text-light);
        }
        .problem-card:hover .problem-card__description {
            max-height: 300px;
            opacity: 1;
            margin-top: 15px;
        }

        .problem-card__header { 
            display: flex; 
            align-items: center; 
            gap: 15px;
            margin: auto 0;
        }
        .problem-card__icon { font-size: 1.5rem; }
        .problem-card__title { font-family: var(--font-headline); font-size: 1.2rem; font-weight: 700; }
        .problem-card code { font-family: monospace; background-color: var(--border-color); color: var(--text-dark); padding: 2px 6px; border-radius: 4px; font-size: 0.95rem; }
        
        .audience-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            text-align: left;
            max-width: 900px;
            margin: 0 auto;
        }
        .audience-column, .offer-card { transition: transform 0.3s ease; }
        .audience-column:hover, .offer-card:hover { transform: translateY(-5px); }

        .audience-column {
            background-color: var(--bg-secondary);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid var(--border-color);
        }
        .audience-column h3 { font-family: var(--font-headline); font-size: 1.5rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .audience-column.perfect h3 { color: var(--accent-green); }
        .audience-column ul { list-style: none; padding: 0; }
        .audience-column li { font-size: 0.95rem; color: var(--text-dark); margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px; }
        .audience-column li::before { font-weight: bold; flex-shrink: 0; margin-top: 2px; }
        .perfect li::before { content: '✓'; color: var(--accent-green); }
        .unsuitable li::before { content: '–'; color: var(--text-light); }
        .unsuitable .witty-comment { color: var(--text-light); font-style: italic; font-size: 0.9em; }

        .last-section-content { background-color: var(--bg-secondary); flex-grow: 1; width: 100%; display: flex; align-items: center; justify-content: center;}
        .offer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-bottom: 40px; text-align: left; }
        .offer-card { background: var(--bg-main); border: 1px solid var(--border-color); padding: 30px; border-radius: 16px; }
        .offer-card__title { font-family: var(--font-headline); font-size: 1.5rem; font-weight: 700; margin-bottom: 10px; color: var(--accent-blue); }
        .offer-card__description { color: var(--text-dark); font-size: 0.95rem; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading-state {
            animation: pulse 1s ease-in-out infinite;
        }

        .investors-link {
            position: absolute;
            top: 25px;
            right: 30px;
            background-color: rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(5px);
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            cursor: pointer;
        }
        .investors-link:hover {
            background-color: var(--text-dark);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .fomo-progress-bar {
            max-width: 450px;
            margin: 2rem auto 0 auto;
        }
        .progress-container {
            width: 100%;
            height: 10px;
            background-color: rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 6px;
        }
        .progress-bar {
            width: 0%; 
            height: 100%;
            background-color: var(--accent-green);
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .progress-label {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-dark);
            text-align: left;
        }
        .progress-label span {
            font-weight: 700;
        }
        
        /* ----- STYLE CHANGE FOR IMAGE ----- */
        .different {
            position: relative;
            overflow: hidden;
        }
        .different::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.85)), url('https://i.ibb.co/zHHkLGKD/Copy-of-num-433.png');
            background-size: cover;
            background-position: center;
            transform: scale(1.5) rotate(15deg);
            z-index: 1;
        }

        .different-text {
            max-width: 750px;
            margin: 0 auto;
            text-align: center;
        }
        .different-text p {
            font-size: clamp(1.1rem, 3vw, 1.4rem);
            line-height: 1.5;
            margin-bottom: 1.5rem;
            color: var(--text-dark);
        }
        .different-text .intro-text {
            color: var(--text-light);
            font-size: clamp(1rem, 2.5vw, 1.2rem);
        }
        .different-text .conclusion {
            margin-top: 2rem;
            font-weight: 500;
            color: var(--text-dark);
            font-family: var(--font-headline);
        }

        .final-cta-info {
            margin-top: 2rem;
        }

        .social-proof {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 1rem;
            color: var(--text-light);
        }
         .social-proof span { 
            color: var(--accent-blue); 
            font-weight: 700; 
            font-size: 1.1rem;
            display: inline-block;
            min-width: 30px;
        }
        .investor-pitch-link .link-text {
            color: var(--accent-blue);
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
        }
        .investor-pitch-link .link-text:hover {
            text-decoration: underline;
        }
        
        .page-footer {
            flex-shrink: 0;
            width: 100%;
            padding: 20px;
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-light);
            background-color: var(--bg-secondary);
        }
        .page-footer a {
            color: var(--text-light);
            text-decoration: none;
        }
        .page-footer a:hover {
            color: var(--text-dark);
        }

        .pain-point-emphasis {
            display: block;
            margin-top: 5px;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85em;
            color: var(--accent-blue);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: white;
            padding: 30px 40px;
            border-radius: 16px;
            max-width: 90%;
            width: 500px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            text-align: left;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            color: #aaa;
            cursor: pointer;
            line-height: 1;
            transition: color 0.2s ease;
        }
        .modal-close:hover {
            color: var(--text-dark);
        }

        .modal-content h3 {
            font-family: var(--font-headline);
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        .modal-content p {
            margin-bottom: 20px;
            color: var(--text-light);
        }
        .modal-form label {
            display: block;
            font-weight: 500;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        .modal-form input[type="text"], 
        .modal-form input[type="email"] {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 1rem;
            font-family: var(--font-body);
        }
         .modal-form input[type="text"]:focus,
         .modal-form input[type="email"]:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.15);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            font-size: 0.95rem;
            color: var(--text-dark);
        }
        .checkbox-container input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        .investor-form-fields {
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: opacity 0.3s ease-in-out, max-height 0.3s ease-in-out;
        }
        .investor-form-fields.visible {
            opacity: 1;
            max-height: 200px;
        }
        
        @media (max-width: 768px) {
            .scroll-section { height: auto; min-height: 100vh; padding: 80px 20px; }
            .scroll-container { scroll-snap-type: none; overflow: auto; }
            .audience-columns { grid-template-columns: 1fr; }
            
            .problem-card {
                min-height: auto;
            }
            .problem-card__description {
                max-height: 300px;
                opacity: 1;
                margin-top: 15px;
            }
             .problem-card__header {
                margin: 0;
            }
            .investors-link {
                top: 15px;
                right: 15px;
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            .page-footer {
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>

    <div class="scroll-container">

        <section class="scroll-section hero">
            <span class="investors-link" id="investors-button-top">For Investors →</span>
            <div class="container">
                <h1>Stop Fighting Your Keyboard.</h1>
                <h2>Finally, a keyboard that keeps up with your multilingual brain.</h2>
                <p class="hero-sub-stat">Join 2.3 Billion Multilingual Typists Who Need This</p>
                <div class="hero-cta-wrapper">
                    <a href="https://form.typeswitch.io" class="cta-button">
                       First 200 Founding Users Get 15% Off
                    </a>
                    <p class="microcopy">Survey is anonymous. Add your email for an extra 10% off!</p>
                    <div class="fomo-progress-bar">
                         <p class="progress-label"><span id="spots-taken" class="loading-state">...</span>/200 Founding Spots Taken</p>
                         <div class="progress-container">
                             <div id="spots-progress-bar" class="progress-bar"></div>
                         </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="scroll-section problems">
            <div class="container">
                <h2 class="section-title">Sound Familiar?</h2>
                <div class="problems-grid">
                     <div class="problem-card">
                        <div class="problem-card__header"><span class="problem-card__icon">⚠️</span><h3 class="problem-card__title">The Wrong Language Glitch</h3></div>
                        <div class="problem-card__description"><p>You want to start an email with "Hello Daniel," but your fingers type<br><code>יקךךם גשמןקך</code><br>because your keyboard is still set to Hebrew. You try to reply in Russian, but the letters appear in English. You sigh, switch, delete, and lose your train of thought.<span class="pain-point-emphasis">Every. Single. Day. 10 times a day!</span></p></div>
                    </div>
                    <div class="problem-card">
                        <div class="problem-card__header"><span class="problem-card__icon">⚡️</span><h3 class="problem-card__title">The Alt-Key Hijack</h3></div>
                        <div class="problem-card__description"><p>You try to switch languages, but your finger hits <code>Alt</code> a millisecond before <code>Shift</code>. Suddenly, you're not typing anymore. The app's menu bar is highlighted, your cursor is gone, and your flow is completely shattered.</p></div>
                    </div>
                    <div class="problem-card">
                        <div class="problem-card__header"><span class="problem-card__icon">🔍</span><h3 class="problem-card__title">The Symbol Hunt</h3></div>
                        <div class="problem-card__description"><p>You need to type a formal Arabic phrase with vowels (Harakat), forcing you to hunt for <code>Shift+Q</code>, <code>Shift+A</code>, and <code>Shift+E</code> just for one word. You switch to Hebrew to end a sentence and type a <code>ץ</code> instead of a period. In Russian, the comma is hiding on the same key as the question mark. You're constantly breaking your flow just to type basic punctuation.</p></div>
                    </div>
                    <div class="problem-card">
                        <div class="problem-card__header"><span class="problem-card__icon">👀</span><h3 class="problem-card__title">The Visual Mismatch</h3></div>
                        <div class="problem-card__description"><p>Your brain is fighting your fingers. The Russian <code>В</code> looks like a <code>B</code> but lives on the <code>D</code> key. The Cyrillic <code>Н</code> is <code>N</code>, not <code>H</code>. The Hebrew <code>ס</code> (Samekh) looks like an <code>O</code>, and <code>ו</code> (Vav) looks like a <code>I</code>, causing constant typos.</p></div>
                    </div>
                    <div class="problem-card">
                        <div class="problem-card__header"><span class="problem-card__icon">🤯</span><h3 class="problem-card__title">The Flow Killer</h3></div>
                        <div class="problem-card__description"><p>Type. Check. Wrong. Delete. Switch. Retype.<br>Mental momentum: gone.<br>Creative thought: interrupted.<br>Daily frustration: mounting.<br>Productivity: just imagine.</p></div>
                    </div>
                    <div class="problem-card">
                        <div class="problem-card__header"><span class="problem-card__icon">🔒</span><h3 class="problem-card__title">The Caps Lock Trap</h3></div>
                        <div class="problem-card__description"><p>You hit <code>CAPS LOCK</code> by accident. Now, when you switch to Hebrew, it types in English. In Russian, you're stuck SHOUTING IN CYRILLIC. In Arabic, it does nothing until you switch back to English and realize your entire password was just typed in uppercase. The state is unpredictable, and the result is always frustration.</p></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="scroll-section audience">
            <div class="container">
                <h2 class="section-title">Is TypeSwitch Right For You?</h2>
                <div class="audience-columns">
                    <div class="audience-column perfect">
                        <h3>✅ Perfect for</h3>
                        <ul>
                            <li>Multilingual professionals & remote workers in global teams</li>
                            <li>Anyone in international business (sales, support, etc.)</li>
                            <li>People tired of daily language-switching frustrations</li>
                            <li>Translators, content creators, and students</li>
                            <li>Those needing clear visual cues (e.g., for ADHD)</li>
                        </ul>
                    </div>
                    <div class="audience-column unsuitable">
                        <h3>💡 Less suitable for</h3>
                        <ul>
                            <li>Single-language typists <span class="witty-comment">(there are simpler tools!)</span></li>
                            <li>Casual users who barely touch a keyboard</li>
                            <li>Mobile-only or voice-to-text primary users</li>
                            <li>Happy with current setup <span class="witty-comment">(we're jealous!)</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="scroll-section different">
            <div class="container">
                <div class="different-text">
                    <h2 class="section-title">Why We're Different</h2>
                    <p class="intro-text">Most keyboards try to do everything and end up helping a few.<br>TypeSwitch is different. Instead of guessing what you need, we're asking.</p>
                    <p>Instead of 20 features, we're building the <strong>right ones</strong> to solve your multilingual typing problems.</p>
                    <p>Instead of another $300 gadget, we're creating an <strong>affordable solution</strong> that actually works for multilingual typists.</p>
                    <p class="conclusion">Built with your input. For your needs. With style and quality. <br>Nothing more, nothing less.</p>
                </div>
            </div>
        </section>
        
        <section class="scroll-section">
            <div class="last-section-content">
                <div class="container">
                    <h2 class="section-title">Your Input is a Game-Changer.</h2>
                    <div class="offer-grid">
                        <div class="offer-card">
                            <h3 class="offer-card__title">Your Voice, Our Blueprint.</h3>
                            <p class="offer-card__description">Your survey answers are the blueprint for the keyboard you've always wanted. Prioritize the features that matter most to YOU.</p>
                        </div>
                        <div class="offer-card">
                            <h3 class="offer-card__title">Join the Inner Circle.</h3>
                            <p class="offer-card__description">As a Founding User, you're part of the team. You'll get exclusive updates and be the first to own the final product.</p>
                        </div>
                        <div class="offer-card">
                            <h3 class="offer-card__title">A Worthy Thank You.</h3>
                            <p class="offer-card__description">Your expert input is invaluable. For completing the anonymous survey, you'll get a 15% discount. Want a total of 25% off? Just leave your email at the end.</p>
                        </div>
                    </div>
                    <a href="https://form.typeswitch.io" class="cta-button">
                        Take the 5-Minute Survey
                    </a>

                    <div class="final-cta-info">
                        <p class="social-proof">
                            Join the <span id="survey-count" class="loading-state">...</span> multilingual pros who have already completed the survey.
                        </p>
                        <p class="investor-pitch-link">
                           Investors: Interested? <span class="link-text" id="investors-button-bottom">See our pitch deck →</span>
                        </p>
                    </div>
                </div>
            </div>

            <footer class="page-footer">
                <p class="copyright">
                     © 2025 TypeSwitch Ltd. All rights reserved. | 
                    Contact: <a href="mailto:Michael@typeswitch.io">Michael@typeswitch.io</a>
                </p>
            </footer>
        </section>
    </div>

    <div class="modal-overlay" id="investor-modal">
        <div class="modal-content">
            <span class="modal-close" id="modal-close-button">&times;</span>
            <h3>For Investors</h3>
            <p>We're seeking $30k-$150k to finalize development and launch. If you're interested in backing the future of multilingual typing, we'd love to share more details.</p>
            <form class="modal-form" id="investor-form">
                <div class="checkbox-container">
                    <input type="checkbox" id="confirm-investment-range">
                    <label for="confirm-investment-range">I confirm I understand the investment range of $30k-$150k is required.</label>
                </div>
                
                <div class="investor-form-fields" id="investor-details-fields">
                    <label for="full-name">Full Name</label>
                    <input type="text" id="full-name" name="name" required>
                    
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                    
                    <button type="submit" class="cta-button">Send me info</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module">
        // Supabase Client Setup
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';
        const SUPABASE_URL = 'https://raagydwyruvrayaclgbu.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhYWd5ZHd5cnV2cmF5YWNsZ2J1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxNTE0MDEsImV4cCI6MjA3MTcyNzQwMX0.ZgivHwYwPvqgayTPMoXNWiTH3lzizJ7boJrYV7NpMtY';
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Counter Logic
        const BASE_COUNT = 73;
        const FOUNDERS_GOAL = 200;

        async function updateSurveyCount() {
            const spotsTakenEl = document.getElementById('spots-taken');
            const progressBarEl = document.getElementById('spots-progress-bar');
            const surveyCountEl = document.getElementById('survey-count');

            try {
                const { count, error } = await supabase
                    .from('survey_responses')
                    .select('*', { count: 'exact', head: true })
                    .not('discount_code', 'is', null);
                
                if (error) throw error;
                
                const totalCount = BASE_COUNT + (count || 0);
                
                spotsTakenEl.textContent = totalCount;
                spotsTakenEl.classList.remove('loading-state');
                const progressPercentage = Math.min((totalCount / FOUNDERS_GOAL) * 100, 100);
                progressBarEl.style.width = `${progressPercentage}%`;

                surveyCountEl.textContent = totalCount;
                surveyCountEl.classList.remove('loading-state');
                
            } catch (err) {
                console.error('Error fetching count:', err);
                const fallbackCount = 84;
                spotsTakenEl.textContent = fallbackCount;
                progressBarEl.style.width = `${(fallbackCount / FOUNDERS_GOAL) * 100}%`;
                surveyCountEl.textContent = fallbackCount;
                spotsTakenEl.classList.remove('loading-state');
                surveyCountEl.classList.remove('loading-state');
            }
        }
        
        updateSurveyCount();
        setInterval(updateSurveyCount, 30000);

        // Modal Logic
        const investorModal = document.getElementById('investor-modal');
        const investorBtnTop = document.getElementById('investors-button-top');
        const investorBtnBottom = document.getElementById('investors-button-bottom');
        const closeBtn = document.getElementById('modal-close-button');
        const confirmCheckbox = document.getElementById('confirm-investment-range');
        const investorDetailsFields = document.getElementById('investor-details-fields');

        function openModal(e) {
            e.preventDefault();
            investorModal.style.display = 'flex';
            confirmCheckbox.checked = false;
            investorDetailsFields.classList.remove('visible');
            document.getElementById('investor-form').reset();
            
            // Restore form if it was replaced by success message
            const investorForm = document.getElementById('investor-form');
            if (!investorForm.querySelector('button')) {
                 investorForm.innerHTML = `
                    <div class="checkbox-container">
                        <input type="checkbox" id="confirm-investment-range-inner">
                        <label for="confirm-investment-range-inner">I confirm I understand the investment range of $30k-$150k is required.</label>
                    </div>
                    <div class="investor-form-fields" id="investor-details-fields-inner">
                        <label for="full-name">Full Name</label>
                        <input type="text" id="full-name-inner" name="name" required>
                        <label for="email">Email</label>
                        <input type="email" id="email-inner" name="email" required>
                        <button type="submit" class="cta-button">Send me info</button>
                    </div>`;
                // Re-attach checkbox listener
                document.getElementById('confirm-investment-range-inner').addEventListener('change', (event) => {
                     document.getElementById('investor-details-fields-inner').classList.toggle('visible', event.target.checked);
                });
            }
        }

        investorBtnTop.addEventListener('click', openModal);
        investorBtnBottom.addEventListener('click', openModal);

        closeBtn.addEventListener('click', () => {
            investorModal.style.display = 'none';
        });

        investorModal.addEventListener('click', (event) => {
            if (event.target === investorModal) {
                investorModal.style.display = 'none';
            }
        });

        confirmCheckbox.addEventListener('change', () => {
            investorDetailsFields.classList.toggle('visible', confirmCheckbox.checked);
        });

        const investorForm = document.getElementById('investor-form');
        investorForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            
            const internalCheckbox = document.getElementById('confirm-investment-range') || document.getElementById('confirm-investment-range-inner');

            if (!internalCheckbox.checked) {
                alert('Please confirm you understand the investment range.');
                return;
            }

            const submitButton = investorForm.querySelector('button[type="submit"]');
            const originalButtonText = submitButton.textContent;
            
            submitButton.textContent = 'Sending...';
            submitButton.disabled = true;

            const formData = new FormData(investorForm);
            const fullName = formData.get('name');
            const email = formData.get('email');

            try {
                const { error } = await supabase
                    .from('investor_leads')
                    .insert([{ full_name: fullName, email: email }]);

                if (error) throw error;

                investorForm.innerHTML = `<p style="text-align: center; font-size: 1.1rem;">Thank you! We will be in touch shortly.</p>`;

            } catch (error) {
                alert('There was an error submitting your request. Please try again.');
                console.error('Error inserting data into Supabase:', error);
                submitButton.textContent = originalButtonText;
                submitButton.disabled = false;
            }
        });
    </script>
    
    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());
    </script>

</body>
</html>

